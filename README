# TobaccoCS

## Health Check
### Command
{
    "command":"health_check", 
    "ackn":"request"
}
### Response
{
    "command":"health_check",
    "failed_count": 0 // anzahl nicht erreichter Tubes
    "failes_tubes": [] // array mit tube nummern
    "ackn":"acknowledge"
}

## Check if empty
### Command
{
    "command":"check_if_empty", 
    "tube_nr": 0, // tubes nummeriert von 1 - 39 für das Teststeup
    "ackn":"request"
}
### Response
{
    "command":"check_if_empty",
    "tube_nr": 0, // tubes nummeriert von 1 - 39 für das Teststeup
    "error":"no error", // Fehlerbeschreibung
    "ackn":"acknowledge"
}

## release content
### Command
{
    "command":"release_content", 
    "tube_nr": [0,1], // tubes nummeriert von 1 - 39 für das Teststeup
    "ackn":"request"
}
### Response
{
    "command":"release_content",
    "tube_nrs": [
        {
            "tube_nr": 0,
            "success": true,
            "error": "no_error"
        },
        {
            "tube_nr": 1,
            "success": true,
            "error": "tube_emptied"
        },
        {
            "tube_nr": 2,
            "success": false,
            "error": "tube_empty"
        },
        {
            "tube_nr": 3,
            "success": false,
            "error": "communication_failed"
        }

    ],
    "ackn":"acknowledge"
}

## I2C adresse setzen
### Command
{
    "command":"set_i2c_address", 
    "tube_nr": 0, // tubes nummeriert von 1 - 39 für das Teststeup
    "ackn":"request"
}
### Response
{
    "command":"set_i2c_address",
    "tube_nr": 0, // tubes nummeriert von 1 - 39 für das Teststeup
    "error":"no error", // Fehlerbeschreibung
    "ackn":"acknowledge"
}